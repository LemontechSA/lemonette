/*! lemonette 2015-08-19 */
(function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},d=function(a,b){return function(){return a.apply(b,arguments)}};window.Lemonette=a={},this.Lemonette.Application=function(b){function d(){d.__super__.constructor.apply(this,arguments),this.createModules(),this.createCommands()}return c(d,b),d.prototype.defaultData={host:"localhost",api_url:"http://localhost:3000",ws_endpoint:"http://localhost:3000/faye",current_user:null,api_token:null,default_lang:"es"},d.prototype.createModules=function(){return this.module("Controllers",a.ControllersModule),this.module("DateHelper",a.DateHelperModule),this.module("Notifications",a.NotificationsModule),this.module("Routers",a.RoutersModule),this.module("Shared",a.SharedModule),this.module("Utils",a.UtilsModule),this.module("Views",a.ViewsModule)},d.prototype.bootstrap=function(a){var b;return b=window.bootstrap_data||this.defaultData,b[a]},d.prototype.createCommands=function(){return this.commands.setHandlerTracking=function(a){return function(b,c){return a.commands.setHandler(b,function(){return ga("send","event","action",b),c.apply(c,arguments)})}}(this)},d.prototype.navigate=function(a,b){return null==b&&(b={}),Backbone.history.navigate(a,b)},d.prototype.getCurrentRoute=function(){var a;return a=Backbone.history.fragment,_.isEmpty(a)?null:a},d.prototype.startHistory=function(){return Backbone.history?Backbone.history.start():void 0},d.prototype.register=function(a,b){return null==this._registry&&(this._registry={}),this._registry[b]=a},d.prototype.unregister=function(a,b){return delete this._registry[b]},d.prototype.resetRegistry=function(){var a,b,c,d,e;d=this.getRegistrySize(),e=this._registry;for(b in e)a=e[b],a.region.close();return c="There were "+d+" controllers in the registry, there are now "+this.getRegistrySize(),this.getRegistrySize()>0?console.warn(c,this._registry):console.log(c)},d.prototype.getRegistrySize=function(){return _.size(this._registry)},d.prototype.log=function(a,b,c){return this.debug&&this.debug<c?void 0:"string"!=typeof a?console.log("Object("+b+")",a):console.log((b?"("+b+") ":"")+a)},d}(Backbone.Marionette.Application),function(a,b){"function"==typeof define&&define.amd?define(["underscore","backbone"],function(c,d){return a.Backbone=b(c,d)}):a.Backbone=b(a._,a.Backbone)}(this,function(a,b){var c,d,e,f,g,h,i,j,k;return g=function(c,d,e){var f,g;d=d||{},g=a.isFunction(c.url)?c.url():c.url,f=!1,g&&d.cache!==!1&&(d.cache||d.prefill)&&(d.expires!==!1&&(f=(new Date).getTime()+1e3*(d.expires||300)),b.fetchCache._cache[g]={created:(new Date).getTime(),expires:f,value:e},b.fetchCache.setLocalStorage())},e=function(c){var d;return d=a.isFunction(c.url)?c.url():c.url,d?b.fetchCache._cache[d]:null},k=function(a,b,c){var d;b=b||{},b.cache=!0,d=e(a),d&&!b.hasOwnProperty("expires")&&(b.expires=d.expires?(d.expires-d.created)/1e3:!1),g(a,b,c)},d=function(a){var b;return b=e(a),b?b.created:null},c=function(a){delete b.fetchCache._cache[a],b.fetchCache.setLocalStorage()},h=function(){var a,c;if(j&&b.fetchCache.localStorage)try{localStorage.setItem("backboneCache",JSON.stringify(b.fetchCache._cache))}catch(d){if(c=d,a=c.code||c.number||c.message,22!==a)throw c;this._deleteCacheWithPriority()}},f=function(){var a;j&&b.fetchCache.localStorage&&(a=localStorage.getItem("backboneCache")||"{}",b.fetchCache._cache=JSON.parse(a))},i={modelFetch:b.Model.prototype.fetch,modelSync:b.Model.prototype.sync,collectionFetch:b.Collection.prototype.fetch},j="undefined"!=typeof window.localStorage,b.fetchCache=b.fetchCache||{},b.fetchCache._cache=b.fetchCache._cache||{},b.fetchCache.priorityFn=function(a,b){return a&&a.expires&&b&&b.expires?a.expires-b.expires:a},b.fetchCache._prioritize=function(){var b,c;return c=a.values(this._cache).sort(this.priorityFn),b=a.indexOf(a.values(this._cache),c[0]),a.keys(this._cache)[b]},b.fetchCache._deleteCacheWithPriority=function(){b.fetchCache._cache[this._prioritize()]=null,delete b.fetchCache._cache[this._prioritize()],b.fetchCache.setLocalStorage()},"undefined"==typeof b.fetchCache.localStorage&&(b.fetchCache.localStorage=!0),b.Model.prototype.cacheTime=function(){return d(this)},b.Collection.prototype.cacheTime=function(){return d(this)},b.Model.prototype.updateCache=function(a){k(this,a,this.attributes)},b.Collection.prototype.updateCache=function(b){k(this,b,a.map(this.models,function(a){return a.attributes}))},b.Model.prototype.fetch=function(c){var d,e,f,g,h;if(c=c||{},h=a.isFunction(this.url)?this.url():this.url,e=b.fetchCache._cache[h],f=!1,d=!1,g=new $.Deferred,e&&(f=e.expires,f=f&&e.expires<(new Date).getTime(),d=e.value),!f&&(c.cache||c.prefill)&&d){if(this.set(this.parse(d),c),a.isFunction(c.prefillSuccess)&&c.prefillSuccess(this,d,c),this.trigger("cachesync",this,d,c),this.trigger("sync",this,d,c),!c.prefill)return a.isFunction(c.success)&&c.success(this),g.resolve(this);g.notify(this)}return i.modelFetch.apply(this,arguments).done(a.bind(g.resolve,this,this)).done(a.bind(b.fetchCache.setCache,null,this,c)).fail(a.bind(g.reject,this,this)),g},b.Model.prototype.sync=function(b,d,e){var f,g,h,j;if("read"===b)return i.modelSync.apply(this,arguments);for(f=d.collection,h=[],g=void 0,j=void 0,h.push(a.isFunction(d.url)?d.url():d.url),f&&h.push(a.isFunction(f.url)?f.url():f.url),g=0,j=h.length;j>g;)c(h[g]),g++;return i.modelSync.apply(this,arguments)},b.Collection.prototype.fetch=function(c){var d,e,f,g,h;if(c=c||{},h=a.isFunction(this.url)?this.url():this.url,e=b.fetchCache._cache[h],f=!1,d=!1,g=new $.Deferred,e&&(f=e.expires,f=f&&e.expires<(new Date).getTime(),d=e.value),!f&&(c.cache||c.prefill)&&d){if(this[c.reset?"reset":"set"](this.parse(d),c),a.isFunction(c.prefillSuccess)&&c.prefillSuccess(this,d,c),this.trigger("cachesync",this,d,c),this.trigger("sync",this,d,c),!c.prefill)return a.isFunction(c.success)&&c.success(this),g.resolve(this);g.notify(this)}return i.collectionFetch.apply(this,arguments).done(a.bind(g.resolve,this,this)).done(a.bind(b.fetchCache.setCache,null,this,c)).fail(a.bind(g.reject,this,this)),g},f(),b.fetchCache._superMethods=i,b.fetchCache.setCache=g,b.fetchCache.clearItem=c,b.fetchCache.setLocalStorage=h,b.fetchCache.getLocalStorage=f,b}),this.Lemonette.Module=function(b){function d(){return d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.initialize=function(b,c,d){return c.App=d,this.App=d,a.InstanceApp=d},d}(Marionette.Module),this.Lemonette.BaseController=function(b){function d(b){null==b&&(b={}),this.App=a.InstanceApp,this.region=b.region||this.App.request("default:region"),this._instance_id=_.uniqueId("controller"),this.App.execute("register:instance",this,this._instance_id),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.close=function(){return this.App.execute("unregister:instance",this,this._instance_id),d.__super__.close.apply(this,arguments)},d.prototype.show=function(a,b){return null==b&&(b={}),_.defaults(b,{loading:!1,region:this.region}),this._setMainView(a),this._manageView(a,b)},d.prototype._setMainView=function(a){return this._mainView?void 0:(this._mainView=a,this.listenTo(a,"close",this.close))},d.prototype._manageView=function(a,b){return b.loading?this.App.execute("show:loading",a,b):b.region.show(a)},d}(Marionette.Controller),this.Lemonette.ControllersModule=function(b){function d(){return d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.BaseController=a.BaseController,d}(a.Module),this.Lemonette.D=function(){function b(a){(a instanceof String||"string"==typeof a)&&(this._d=moment(a)),a instanceof Date&&(this._d=moment(a)),a||(this._d=moment(new Date)),a&&"object"==typeof a._d&&(this._d=a)}return b.prototype._d={},b.prototype.toString=function(a){return null==a&&(a="YYYY-MM-DD"),this._d.format(a)},b.prototype.isToday=function(){return this._d.isSame(moment().format("YYYY-MM-DD"))},b.prototype.startOfWeek=function(){return new a.D(this._d.startOf("isoWeek").format("YYYY-MM-DD"))},b.prototype.endOfWeek=function(){return new a.D(this._d.endOf("isoWeek").format("YYYY-MM-DD"))},b.prototype.date=function(){return this._d._d},b.prototype.s=function(a){return null==a&&(a="YYYY-MM-DD"),this.toString(a)},b.prototype.d=function(){return this.date()},b}(),this.Lemonette.DateHelperModule=function(b){function d(){return d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.D=a.D,d}(a.Module),this.Lemonette.AutoFillable=function(){function b(){}return b.prototype.fillRelation=function(b,c,d,e,f,g){return null==g&&(g={}),"string"==typeof b&&(b=a.InstanceApp.Models.collection(b)),b[d]=e?$(e.target).val():f,this.fillSelect(b,c,g)},b.prototype.fillSelect=function(b,c,d){var e,f;return null==d&&(d={}),d=$.extend({persistent:!0,cache:!0,prefill:!0},d),"string"==typeof b&&(b=a.InstanceApp.Models.collection(b)),f="function"==typeof b.url?b.url():b.url,d.persistent&&b.fetchedUrl===f?this.createOptionsFromCollection(b,c,d):(e=function(a){return function(){return b.fetchedUrl=f,a.createOptionsFromCollection(b,c,d)}}(this),d.cache?b.cacheFetch({success:e},!0):b.prefillFetch({prefill:d.prefill,success:e},!0))},b.prototype.createOptionsFromCollection=function(a,b,c){var d,e;return null==c&&(c={}),d={selected_value:null,name_field:"name",default_value:null,persistent:!0},c=$.extend(d,c),e=[],a.each(function(b){var d;return c.filter&&!c.filter(b,a)||(d="string"==typeof c.name_field?b.get(c.name_field):c.name_field(b),d={id:b.id,value:d},e.push(d),"function"!=typeof c.default_value||!c.default_value(b))?void 0:c.default_value=b.id}),this.createOptions(b,e,c.selected_value,c.default_value,c)},b.prototype.createOptions=function(a,b,c,d,e){var f,g;return null==c&&(c=null),null==d&&(d=null),null==e&&(e={}),0===_.keys(e).length&&(f={selected_value:null,name_field:"name",default_value:null,persistent:!0},e=$.extend(f,e)),null===d&&this.default_values&&this.default_values[a]&&(d=this.default_values[a]),null===c&&(c=this.model&&(this.model.id||this.model.get(a))?this.model.get(a):d),c+="",g=e.element||this.$("#"+a),0===g.length&&(g=$("#"+a)),g.find("option").remove(),g.append($("<option/>",{val:"",text:""})),$.each(b,function(a,b){var d;return d={val:b.id||a,text:b.value||b},parseInt(c,10)===parseInt(b.id||a,10)&&(d.selected="selected"),g.append($("<option/>",d))}),g.change()},b.prototype.fillModel=function(a,b){var c,d;return null==a&&(a={}),null==b&&(b=!1),d=a.model||this.model,c=a.inputs||this.$("[name]"),b||this.validateInputs(c)?(c.each(function(){var b,c,e,f,g,h;if(c=$(this).attr("name"),h=$(this).val(),""===h&&"SELECT"===this.tagName?h=null:"checkbox"===$(this).attr("type")?h=$(this).is(":checked"):$(this).data("datefield")&&(b=$("[data-datefield="+c+"].datetime-date").val().replace(/^(\d{1,2})\D(\d{1,2})\D(\d{4})$/,"$3-$2-$1").split("-"),g=$("[data-datefield="+c+"].datetime-time"),f=(g.val()||g.data("empty_time")||"00:00").split(":"),h=new Date(b[0],b[1]-1,b[2],f[0],f[1]).toISOString()),a.beforeSet){if(e=a.beforeSet(this,d,h,c),!e)return!0;"object"==typeof e&&(e.field&&(c=e.field),e.value&&(h=e.value))}return d.set(c,h),a.afterSet?a.afterSet(this,d,h,c):void 0}),d):null},b}(),this.Lemonette.CacheableCollection=function(a){function b(){return this.cacheFetch=d(this.cacheFetch,this),b.__super__.constructor.apply(this,arguments)}return c(b,a),b.prototype.initialize=function(){return this.removedItems={},this.on("remove",function(a){return function(b){return b.id?a.removedItems[b.id]=b:void 0}}(this))},b.prototype.syncItems=function(a){return null==a&&(a=void 0),$.each(this.removedItems,function(a){return function(b,c){return c.urlRoot=a.url(),c.destroy()}}(this)),this.removedItems={},this.each(function(b){return function(c){var d;return c.id?c.save():(d={},$.isFunction(a)&&(d={success:a}),b.create(c,d))}}(this)),this},b.prototype.prefillFetch=function(a,b){var c,d;return null==a&&(a={}),d=!1,c=$.extend({prefill:!0,expires:2592e3},a),a.success&&(c.prefillSuccess=function(b,c,e){return d=!0,a.success(b,c,e)},c.success=function(c,e,f){return b||!d?a.success(c,e,f):void 0}),this.fetch(c)},b.prototype.cacheFetch=function(a,b){var c,d,e;return null==a&&(a={}),c=$.extend({cache:!0,expires:2592e3},a),d=this.cacheTime(),this.fetch(c),d?(e="function"==typeof this.url?this.url():this.url,e+="/updated?ts="+d/1e3,this.query&&"function"==typeof this.query&&(e+="&"+this.query()),$.ajax(e,{success:function(d){return function(e){var f;return d.set(e.results,{add:!0,merge:!0,remove:!1}),d.remove(d.filter(function(a){return e.ids.indexOf(a.id)<0})),f=function(){return d.updateCache({expires:c.expires}),a.success&&b?a.success(d,e,a):void 0},d.length<e.ids.length?d.fetch({success:function(){return f()}}):f()}}(this)})):void 0},b.prototype.resetFetched=function(a){return this.reset(a),this.fetchedUrl=this.url},b}(Backbone.Collection),this.Lemonette.UpdateEventListener=function(a,b){return this._outstandingId=a,this._awaitCount=b.length,_.each(b,function(a){return this.listenToOnce(a,"sync error",this._onModelSync)},this)},_.extend(this.Lemonette.UpdateEventListener.prototype,Backbone.Events,{_onModelSync:function(a){return a.id===this._outstandingId?(this.trigger("found",a),this.stopListening()):0===--this._awaitCount?(this.stopListening(),this.trigger("notfound")):void 0}}),this.Lemonette.LiveCollection=function(b){function d(b,c){this.App=a.InstanceApp,Backbone.Collection.prototype.constructor.call(this,b,c),this.App.fayeClient&&(this.subscription=this.App.fayeClient.subscribe(this.channel,this._fayeEvent,this))}return c(d,b),d.prototype._fayeEvent=function(a){var b,c;switch(c=a.method,b=a.body,c){case"POST":return this._createEvent(b);case"PUT":return this._updateEvent(b);case"DELETE":return this._removeEvent(b);default:return console.log("Unknown realtime event",a)}},d.prototype._createEvent=function(a){var b,c,d,e;return console.log("live: Create event",a),b=this._getModelId(a),this.get(b)?this._updateEvent(a):(c=this.model.prototype.idAttribute,e=this.filter(function(a){return!a.id}),e.length?(console.log("live: awaiting syncs of unsaved objects"),d=new UpdateEventListener(b,e),d.once("notfound",function(){return this.add(a,{parse:!0})},this)):(console.log("live: adding immediately"),this.add(a,{parse:!0})))},d.prototype._updateEvent=function(a){var b,c,d;return console.log("live: Update event",a),c=this._getModelId(a),d=new this.model(a,{parse:!0}),b=this.get(c),b?b.set(d.attributes):this.add(d)},d.prototype._removeEvent=function(a){var b;return console.log("live: Remove event",a),b=this._getModelId(a),this.remove(b)},d.prototype._getModelId=function(a){return a[this.model.prototype.idAttribute]},d}(Backbone.Collection),this.Lemonette.Processes=function(){function a(){}return a.prototype.triggerLoading=function(a,b,c,d){var e;return null==b&&(b=null),null==c&&(c=null),null==d&&(d=null),e={},e.detonator_classes=this.triggerLoadingOnDetonator(a),b&&(e.icon_classes=this.triggerLoadingOnIcon(b)),c&&d&&(e.original_text=this.triggerLoadingOnText(c,d)),e},a.prototype.restoreLoading=function(a,b,c,d){return null==c&&(c=null),null==d&&(d=null),this.restoreLoadingOnDetonator(a.detonator_classes,b),c&&this.restoreLoadingOnIcon(a.icon_classes,c),d?this.restoreLoadingOnText(a.original_text,d):void 0},a.prototype.triggerLoadingOnDetonator=function(a){var b;return a.blur(),a.prop("disabled",!0),b=a.prop("class"),a.removeClass(b).addClass("btn btn-disabled"),b},a.prototype.triggerLoadingOnIcon=function(a){var b;return b=a.prop("class"),a.removeClass(b).addClass("fa fa-refresh fa-spin"),b},a.prototype.triggerLoadingOnText=function(a,b){var c;return c=a.text(),a.text(b),c},a.prototype.restoreLoadingOnDetonator=function(a,b){return b.prop("disabled",!1),b.removeClass(b.prop("class")).addClass(a)},a.prototype.restoreLoadingOnIcon=function(a,b){return b.removeClass(b.prop("class")).addClass(a)},a.prototype.restoreLoadingOnText=function(a,b){return b.text(a)},a}(),this.Lemonette.SharedModule=function(b){function d(){return d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.AutoFillable=a.AutoFillable,d.prototype.CacheableCollection=a.CacheableCollection,d.prototype.LiveCollection=a.LiveCollection,d.prototype.Processes=a.Processes,d}(a.Module),this.Lemonette.UtilsModule=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.prototype.SpellChecker=function(a,b){var c;return GoogieSpell?(b=b||{},b.server_url="/spell",c=new GoogieSpell(b),c.decorateTextarea(a),c):void alert("You must add lemonette.spell.js to use Utils.SpellChecker")},b.prototype.secondsToHHMMSS=function(a){var b,c;return b=Math.floor(a/3600),a%=3600,c=Math.floor(a/60),a%=60,a=parseInt(a),10>b&&(b="0"+b),10>c&&(c="0"+c),10>a&&(a="0"+a),{hh:b,mm:c,ss:a}},b.prototype.minutesToHHMM=function(a){var b;return b=this.secondsToHHMMSS(60*a),""+b.hh+":"+b.mm},b.prototype.minutesToFormat=function(a,b){var c,d,e,f,g,h,i,j;return d=this.secondsToHHMMSS(60*a),c=""+d.hh,h=""+d.mm,j=b.split(/(:|\s)/),f=j.shift(),g=j.pop(),i=j.join(""),e=this.fixTimeAndFormat(c,f),a=this.fixTimeAndFormat(h,g),b=""+e.format+i+a.format,b.replace("%H",e.time).replace("%M",a.time)},b.prototype.fixTimeAndFormat=function(a,b){return-1!==b.search(/0+\S/)?a.length>1&&(b=b.replace(/0/g,"")):a=a.replace(/^0/,""),{time:a,format:b}},b.prototype.showHelp=function(a,b){var c;return null==b&&(b=!1),this.showing&&!b||$.cookie("visited"+a)&&!b?void 0:(c=introJs(),c.setOptions({disableInteraction:!0}),c.goToStep(a).start(),c.onexit(function(a){return function(){return a.showing=!1}}(this)),$.cookie("visited"+a,1),this.showing=1)},b}(a.Module),this.Lemonette.NotificationsModule=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.prototype.showAlert=function(a){var b;return b={css:"toast-top-full-width",type:a.type||"warning",message:a.message||"You must provide a message",success:a.success,showMethod:"slideDown",title:a.title||"InformaciÃ³n Importante"},$.extend(b,a),this.showMessage(b)},b.prototype.showInfo=function(a){var b;return b={css:"toast-top-full-width",type:a.type||"info",message:a.message||"You must provide a message",success:a.success},$.extend(b,a),this.showMessage(b)},b.prototype.Toast=function(a,b,c,d){this.type=a,this.css=b,this.message=d,this.title=c},b.prototype.showMessage=function(a){var b;return null==a&&(a={}),toastr.clear(),b=new this.Toast(a.type,a.css,a.title,a.message),toastr.options.extendedTimeOut=0,toastr.options.timeOut=a.timeOut||5e3,toastr.options.showMethod=a.showMethod||"slideDown",toastr.options.hideMethod=a.hideMethod||"slideUp",toastr.options.hideDuration=200,toastr.options.positionClass=b.css||"toast-top-full-width",toastr.options.onclick=function(){return toastr.clear(),a.onclick?a.onclick():void 0},toastr[b.type](b.message,b.title),$(".toast .action").on("click",function(){var b;return toastr.clear(),b=$(this).data("callback"),b&&a[b]?a[b]():void 0})},b.prototype.onStart=function(){return this.App.commands.setHandler("alert.show",function(a){return function(b){return a.showAlert(b)}}(this)),this.App.commands.setHandler("info.show",function(a){return function(b){return a.showInfo(b)}}(this))},b}(a.Module),this.Lemonette.TrackableRouter=function(a){function b(a){b.__super__.constructor.apply(this,arguments),this.on("route",function(a,b){return ga("send","pageview",a,a)})}return c(b,a),b}(Marionette.AppRouter),this.Lemonette.RoutersModule=function(b){function d(){return d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.TrackableRouter=a.TrackableRouter,d}(a.Module),this.Lemonette.CollectionView=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.prototype.itemViewEventPrefix="childview",b}(Marionette.CollectionView),this.Lemonette.CompositeView=function(b){function d(){return d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.itemViewEventPrefix="childview",d.prototype.onShow=function(){return this.help_step>0?a.AppInstance.Utils.showHelp(this.help_step):void 0},d}(Marionette.CompositeView),this.Lemonette.ItemView=function(b){function d(){return d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.onShow=function(){return this.help_step>0?a.AppInstance.execute("help:show",this.help_step):void 0},d}(Marionette.ItemView),this.Lemonette.Layout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b}(Marionette.Layout),this.Lemonette.BackboneView=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b}(Backbone.View),this.Lemonette.Trackable=function(){function a(){}return a.prototype.trackables={},a.prototype.trackingValues={},a.prototype.trackingLabels={},a.prototype.trackingNoninteractions={},a.prototype.pushEvent=function(a){return this.trackEvent(a.category,a.action,a.label,a.value,a.noninteraction)},a.prototype.trackEvent=function(a,b,c,d){return ga("send","event",a,b,c)},a.prototype.setTrackingValue=function(a,b){return this.trackingValues[a]=b},a.prototype.setTrackingLabel=function(a,b){return this.trackingLabels[a]=b},a.prototype.setTrackingNoninteraction=function(a,b){return this.trackingNoninteractions[a]=b},a.prototype.getSelector=function(a){var b;return a?a.target&&a.target&&$(a.target).data("track")?$(a.target).data("track"):b=a.target.id?"#"+a.target.id:a.target.tagName+" "+a.target.className:""},a.prototype.getValue=function(a){return a&&a.target&&a.target&&$(a.target).data("track-value")?$(a.target).data("track-value"):""},a.prototype.getEventName=function(a){return a?a.type||"":"system"},a.prototype.track=function(a){var b,c,d,e;return c=this.getEventName(a.event),a.label=a.label||this.trackingLabels[a.action],a.action=a.action||c,a.value=a.value||this.getValue(a.event),e=this.getSelector(a.event),b=this.trackName||this.constructor.name,a.label||(a.label=""+c+" "+e),d={category:b,action:a.action,label:a.label,value:a.value?a.value:"",timestamp:Date.now()},setTimeout(function(a){return function(){return a.pushEvent(d)}}(this))},a}(),this.Lemonette.ViewsModule=function(b){function d(){return d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.Trackable=a.Trackable,d.prototype.Layout=a.Layout,d.prototype.ItemView=a.ItemView,d.prototype.CollectionView=a.CollectionView,d.prototype.CompositeView=a.CompositeView,d.prototype.BackboneView=a.BackboneView,d}(a.Module),Function.prototype.include=function(a){var b,c,d;d=a.prototype;for(b in d)c=d[b],this.prototype[b]=c;return this},function(a,b,c,d){return a.registerHelper("t",function(c){var d;return d=b.t(c),new a.SafeString(d)}),a.registerHelper("dt",function(b,d,e){return new a.SafeString(c(e[b]).format(d))}),a.registerHelper("hm",function(b,d){return new a.SafeString(c().startOf("day").add(parseInt(d[b]),"m").format("HH:mm"))}),a.registerHelper("p",function(b,c){return new a.SafeString(JST[b](c))}),a.registerHelper("input",function(b,c){return c.hash&&(c=c.hash),c.wrapper_class||(c.wrapper_class="sm-2"),"select"===c.type&&c.collection.fetch(),new a.SafeString(JST["shared/inputs/"+b](c))}),a.registerHelper("formatMoney",function(b,c){return new a.SafeString(d.formatMoney(b,c))}),a.registerHelper("formatNumber",function(b,c){return new a.SafeString(d.formatNumber(b,c))})}(Handlebars,i18n,moment,accounting)}).call(this);